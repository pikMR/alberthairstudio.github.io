<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Redirigiendo a WhatsApp...</title>
    <script>
      window.onload = function () {
        // Obtener parámetro "param" de la URL
        const params = new URLSearchParams(window.location.search);
        const rawParam = params.get("param") || "";

        // Separar el valor en customer y datetime
        const [customer, datetime] = rawParam.split(";");

        // Valores por defecto si alguno falta
        const nombre = customer?.trim() || "Usuario Desconocido";
        const fechaHora = datetime?.trim() || "Fecha y Hora no especificadas";

        // Construir el mensaje
        const mensaje = `Hola, soy ${nombre}. He reservado cita para el ${fechaHora}, ¡Nos vemos allí!`;

        // Codificar el mensaje para la URL
        const mensajeCodificado = encodeURIComponent(mensaje);

        // Número de teléfono al que se enviará el mensaje
        const telefono = "34617584185";

        // Redireccionar a WhatsApp
        window.location.href = `https://wa.me/${telefono}?text=${mensajeCodificado}`;
      };
    </script>
  </head>
  <body>
    <p>Redirigiendo a WhatsApp...</p>
  </body>
</html>
